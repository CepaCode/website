<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CepaCode Pro</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .btn-blue { background-color: #007bff; color: white; }
        .btn-orange { background-color: #f5ca31; color: white; }
    </style>
</head>
<body>

<!-- Membership Section -->
<div class="container mt-5 text-center">
    <h2 id="subscriptionTitle">CepaCode Pro</h2>
    <p>¡Bienvenid@ a tu zona exclusiva, <span id="userFullName"></span>!</p>

    <!-- Button Section -->
    <div class="d-flex justify-content-center flex-wrap">
        <button id="practicesButton" class="btn btn-blue m-2">Prácticas de Power Platform</button>
        <button id="examsButton" class="btn btn-blue m-2">Prácticas de examen</button>
        <button id="clubButton" class="btn btn-orange m-2">Acceder al Club de los Viernes</button>
        <button id="phoneButton" class="btn btn-orange m-2">
            Número de teléfono de Nacho Cepa <img src="whatsapp-icon.png" width="20px">
        </button>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const userData = localStorage.getItem("user");

    if (!userData) {
        alert("¡No has iniciado sesión!");
        window.location.href = "signin.html";
        return;
    }

    const user = JSON.parse(userData);
    document.getElementById("userFullName").innerText = user.fullname || "Usuario";
    const subscription = user.subscription ? user.subscription.toLowerCase() : null;

    if (!["mensual", "trimestral", "anual"].includes(subscription)) {
        alert("Tu suscripción no es válida. Por favor, contacta con soporte.");
        window.location.href = "membership.html";
        return;
    }

    document.getElementById("subscriptionTitle").textContent = `CepaCode Pro ${subscription}`;

    // Apply button colors based on subscription type
    if (subscription === "mensual") {
        document.getElementById("clubButton").classList.add("btn-orange");
        document.getElementById("phoneButton").classList.add("btn-orange");
    } else if (subscription === "trimestral") {
        document.getElementById("clubButton").classList.add("btn-blue");
        document.getElementById("phoneButton").classList.add("btn-blue");
    } else if (subscription === "anual") {
        document.getElementById("clubButton").classList.add("btn-orange");
        document.getElementById("phoneButton").classList.add("btn-orange");
    }
});
</script>

</body>
</html>